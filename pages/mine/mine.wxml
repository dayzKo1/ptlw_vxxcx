<view class="container">
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="user-detail">
        <text class="nickname">{{userInfo.nickName || 'æœªç™»å½•'}}</text>
        <text class="user-id">ID: {{userInfo.openid || '---'}}</text>
      </view>
    </view>
  </view>

  <view class="order-section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„è®¢å•</text>
      <text class="more-btn" bindtap="viewAllOrders">å…¨éƒ¨è®¢å• ></text>
    </view>
    <view class="order-tabs">
      <view class="order-tab {{activeTab === 'all' ? 'active' : ''}}" bindtap="switchTab" data-tab="all">
        <text class="tab-icon">ğŸ“‹</text>
        <text class="tab-text">å…¨éƒ¨</text>
      </view>
      <view class="order-tab {{activeTab === 'pending' ? 'active' : ''}}" bindtap="switchTab" data-tab="pending">
        <text class="tab-icon">â³</text>
        <text class="tab-text">å¾…æ”¯ä»˜</text>
      </view>
      <view class="order-tab {{activeTab === 'paid' ? 'active' : ''}}" bindtap="switchTab" data-tab="paid">
        <text class="tab-icon">ğŸ³</text>
        <text class="tab-text">åˆ¶ä½œä¸­</text>
      </view>
      <view class="order-tab {{activeTab === 'completed' ? 'active' : ''}}" bindtap="switchTab" data-tab="completed">
        <text class="tab-icon">âœ…</text>
        <text class="tab-text">å·²å®Œæˆ</text>
      </view>
    </view>
    <view class="order-list">
      <view class="order-item" wx:for="{{orders}}" wx:key="_id" bindtap="viewOrderDetail" data-id="{{item._id}}">
        <view class="order-header">
          <text class="order-number">è®¢å•å·ï¼š{{item.orderNumber}}</text>
          <text class="order-status status-{{item.status}}">{{item.statusText}}</text>
        </view>
        <view class="order-content">
          <view class="dish-preview" wx:for="{{item.items}}" wx:key="dishId" wx:for-item="dish" wx:for-index="dishIndex">
            <view class="dish-image-placeholder">{{dish.emoji || 'ğŸ½ï¸'}}</view>
            <text class="dish-name">{{dish.name}}</text>
            <text class="dish-quantity">x{{dish.quantity}}</text>
          </view>
        </view>
        <view class="order-footer">
          <text class="order-time">{{item.createTime}}</text>
          <text class="order-price">Â¥{{item.totalPrice}}</text>
        </view>
      </view>
      <view class="empty-tip" wx:if="{{orders.length === 0}}">
        <text class="empty-icon">ğŸ“­</text>
        <text class="empty-text">æš‚æ— è®¢å•</text>
      </view>
    </view>
  </view>

  <view class="menu-section">
    <view class="menu-item" bindtap="handleAddress">
      <text class="menu-icon">ğŸ“</text>
      <text class="menu-text">æ”¶è´§åœ°å€</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="handleFavorite">
      <text class="menu-icon">â¤ï¸</text>
      <text class="menu-text">æˆ‘çš„æ”¶è—</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="handleTableQRCode">
      <text class="menu-icon">ğŸ“±</text>
      <text class="menu-text">æ¡Œå·äºŒç»´ç </text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="handleCoupon">
      <text class="menu-icon">ğŸ«</text>
      <text class="menu-text">ä¼˜æƒ åˆ¸</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="handleSettings">
      <text class="menu-icon">âš™ï¸</text>
      <text class="menu-text">è®¾ç½®</text>
      <text class="menu-arrow">></text>
    </view>
    <view class="menu-item" bindtap="handleAbout">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-text">å…³äºæˆ‘ä»¬</text>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <view class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>