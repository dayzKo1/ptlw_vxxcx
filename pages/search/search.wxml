<view class="container">
  <view class="search-section">
    <view class="search-input-wrapper">
      <text class="search-icon">ğŸ”</text>
      <input 
        class="search-input" 
        placeholder="æœç´¢èœå“åç§°" 
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        confirm-type="search"
        focus="{{true}}"
      />
      <text class="clear-icon" wx:if="{{searchKeyword}}" bindtap="clearSearch">âœ•</text>
    </view>
  </view>

  <view class="search-result" wx:if="{{showSearchResult}}">
    <view class="search-result-header">
      <text class="search-result-title">æœç´¢ç»“æœ</text>
      <text class="search-result-count">å…±{{searchResults.length}}ä¸ªå•†å“</text>
    </view>
    <scroll-view scroll-y class="search-result-list">
      <view class="dish-item" wx:for="{{searchResults}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
        <view class="dish-image-placeholder">{{item.emoji || 'ğŸ½ï¸'}}</view>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-desc">{{item.description}}</text>
          <view class="dish-tags" wx:if="{{item.isHot || item.isNew}}">
            <text class="dish-tag" wx:if="{{item.isHot}}">ğŸ”¥ çƒ­é—¨</text>
            <text class="dish-tag" wx:if="{{item.isNew}}">âœ¨ æ–°å“</text>
          </view>
          <view class="dish-bottom">
            <text class="dish-price">Â¥{{item.price}}</text>
            <view class="quantity-control" catchtap="stopPropagation">
              <view class="minus-btn" wx:if="{{item.quantity > 0}}" bindtap="minusDish" data-id="{{item._id}}">-</view>
              <text class="quantity" wx:if="{{item.quantity > 0}}">{{item.quantity}}</text>
              <view class="plus-btn" bindtap="plusDish" data-id="{{item._id}}">+</view>
            </view>
          </view>
        </view>
      </scroll-view>
      <view class="empty-result" wx:if="{{searchResults.length === 0}}">
        <text class="empty-icon">ğŸ”</text>
        <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³å•†å“</text>
      </view>
    </view>
  </view>

  <view class="cart-bar" wx:if="{{cartCount > 0}}">
    <view class="cart-info" bindtap="toggleCartDrawer">
      <view class="cart-icon-wrapper">
        <view class="cart-icon">ğŸ›’</view>
        <view class="cart-badge">{{cartCount}}</view>
      </view>
      <view class="cart-total">
        <text class="total-price">Â¥{{cartTotal}}</text>
        <text class="total-desc">å¦éœ€é…é€è´¹</text>
      </view>
    </view>
    <button class="checkout-btn" bindtap="goToCheckout">å»ç»“ç®—</button>
  </view>

  <view class="cart-drawer-mask {{showCartDrawer ? 'show' : ''}}" bindtap="toggleCartDrawer"></view>
  <view class="cart-drawer {{showCartDrawer ? 'show' : ''}}">
    <view class="cart-drawer-header">
      <text class="cart-drawer-title">è´­ç‰©è½¦</text>
      <text class="close-drawer" bindtap="toggleCartDrawer">âœ•</text>
    </view>

    <scroll-view scroll-y class="cart-drawer-list">
      <view class="cart-drawer-item" wx:for="{{cartItems}}" wx:key="_id">
        <view class="cart-dish-image-placeholder">{{item.emoji || 'ğŸ½ï¸'}}</view>
        <view class="cart-dish-info">
          <text class="cart-dish-name">{{item.name}}</text>
          <text class="cart-dish-price">Â¥{{item.price}}</text>
        </view>
        <view class="cart-quantity-control">
          <view class="minus-btn" bindtap="minusDish" data-id="{{item._id}}">-</view>
          <text class="quantity">{{item.quantity}}</text>
          <view class="plus-btn" bindtap="plusDish" data-id="{{item._id}}">+</view>
        </view>
      </view>
      <view class="empty-cart" wx:if="{{cartItems.length === 0}}">
        <text class="empty-icon">ğŸ›’</text>
        <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
      </view>
    </scroll-view>

    <view class="cart-drawer-footer">
      <view class="drawer-total">
        <text class="drawer-total-label">åˆè®¡</text>
        <text class="drawer-total-price">Â¥{{cartTotal}}</text>
      </view>
      <button class="drawer-checkout-btn" bindtap="goToCheckout">å»ç»“ç®—</button>
    </view>
  </view>

  <view class="dish-modal-mask {{showDishModal ? 'show' : ''}}" bindtap="closeDishModal"></view>
  <view class="dish-modal {{showDishModal ? 'show' : ''}}">
    <view class="dish-modal-content">
      <view class="dish-modal-header">
        <text class="dish-modal-title">å•†å“è¯¦æƒ…</text>
        <text class="close-modal" bindtap="closeDishModal">âœ•</text>
      </view>
      
      <scroll-view scroll-y class="dish-modal-body">
        <view class="modal-dish-image">{{selectedDish.emoji || 'ğŸ½ï¸'}}</view>
        <view class="modal-dish-info">
          <text class="modal-dish-name">{{selectedDish.name}}</text>
          <text class="modal-dish-desc">{{selectedDish.description}}</text>
          <view class="modal-dish-tags" wx:if="{{selectedDish.isHot || selectedDish.isNew}}">
            <text class="modal-dish-tag" wx:if="{{selectedDish.isHot}}">ğŸ”¥ çƒ­é—¨</text>
            <text class="modal-dish-tag" wx:if="{{selectedDish.isNew}}">âœ¨ æ–°å“</text>
          </view>
          <view class="modal-dish-price">
            <text class="modal-price">Â¥{{selectedDish.price}}</text>
          </view>
        </view>
      </scroll-view>
      
      <view class="dish-modal-footer">
        <button class="modal-add-btn" bindtap="addToCartFromModal">åŠ å…¥è´­ç‰©è½¦</button>
      </view>
    </view>
  </view>
</view>