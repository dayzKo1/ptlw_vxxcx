<view class="container">
  <view class="image-placeholder" wx:if="{{images.length === 1 && images[0].length <= 2}}">
    <text class="emoji">{{images[0]}}</text>
  </view>
  <swiper wx:else class="dish-swiper" indicator-dots="{{images.length > 1}}" autoplay="{{images.length > 1}}">
    <swiper-item wx:for="{{images}}" wx:key="index">
      <image class="swiper-image" src="{{item}}" mode="aspectFill"></image>
    </swiper-item>
  </swiper>

  <view class="dish-info-card">
    <view class="dish-header">
      <text class="dish-name">{{dish.name}}</text>
      <view class="dish-tags">
        <text class="tag hot" wx:if="{{dish.isHot}}">热销</text>
        <text class="tag new" wx:if="{{dish.isNew}}">新品</text>
      </view>
    </view>
    <text class="dish-price">¥{{dish.price}}</text>
    <text class="dish-desc">{{dish.description}}</text>

    <view class="dish-specs" wx:if="{{dish.ingredients}}">
      <text class="specs-title">主要食材：</text>
      <text class="specs-content">{{dish.ingredients}}</text>
    </view>

    <view class="dish-specs" wx:if="{{dish.spicyLevel > 0}}">
      <text class="specs-title">辣度：</text>
      <view class="spicy-level">
        <text class="spicy-star {{index < dish.spicyLevel ? 'active' : ''}}" wx:for="{{5}}" wx:key="index">★</text>
      </view>
    </view>
  </view>

  <view class="quantity-section">
    <text class="section-title">购买数量</text>
    <view class="quantity-control">
      <view class="control-btn minus" bindtap="minusQuantity">-</view>
      <text class="quantity">{{quantity}}</text>
      <view class="control-btn plus" bindtap="plusQuantity">+</view>
    </view>
  </view>

  <view class="remark-section">
    <text class="section-title">备注</text>
    <textarea 
      class="remark-input" 
      placeholder="请输入备注信息，如：少辣、不要香菜等" 
      value="{{remark}}"
      bindinput="onRemarkInput"
      maxlength="100"
    ></textarea>
  </view>

  <view class="footer-bar">
    <view class="total-info">
      <text class="total-label">合计：</text>
      <text class="total-price">¥{{totalPrice}}</text>
    </view>
    <button class="add-cart-btn" bindtap="addToCart">加入购物车</button>
  </view>
</view>